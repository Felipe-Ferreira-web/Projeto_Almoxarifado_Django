{% extends "global/base.html" %}

{% load bootstrap_icons %}
{% load static %}

{% block content %}

    <main class="main-container">

        {% include "global/partials/messages.html" %}

        <div class="single-item-table">

            <a id="table-ilustration">
                <img id="logo-ilustration"
                     src="{% static "media\pictures\logo-gray.svg" %}"
                     alt="Logo Storage">

                <h1>Warehouse</h1>
            </a>

            <h2 class="title">• {{ item.item_id }} – {{ item.object }}</h2>

            {% if item.description %}
                <b class="data-name">Description: </b>
                <p class="single-item-details">{{ item.description }}</p>
            {% endif %}

            <b class="data-name">ID: </b>
            <p class="single-item-details">{{ item.item_id }}</p>

            <b class="data-name">Quantity: </b>
            <p class="single-item-details">{{ item.quantity }}</p>

            <b class="data-name">Storage location: </b>
            <p class="single-item-details">{{ item.storage_location }}</p>

            <b class="data-name">Disponibility: </b>

            <p class="single-item-details">
                {% if item.is_available %}
                    Available
                {% else %}
                    Unavailable
                {% endif %}
                <span class="dot
                             {% if item.is_available %}
                                 dot-green
                             {% else %}
                                 dot-red
                             {% endif %}"></span>
            </p>

            <b class="data-name">Created Date: </b>
            <p class="single-item-details">{{ item.created_date }}</p>

            <b class="data-name">Owner ID: </b>
            <p class="single-item-details">{{ item.owner_id }}</p>

            {% if item.current_user %}
                <b class="data-name">Current Holder ID: </b>
                <p class="single-item-details">{{ item.current_user.id }}</p>
            {% endif %}

            {% if user == item.owner %}
                <div class="buttons">

                    <a type="button"
                       class="btn"
                       href="{% url "items:update" item.item_id %}">Update</a>

                    <form action="{% url "items:delete" item.item_id %}" method="POST">
                        {% csrf_token %}

                        {% if confirmation == "no" %}
                            <input type="hidden" name="confirmation" value="yes">
                            <button type="submit" class="btn">Are you Sure?</button>

                        {% else %}
                            <button type="submit" class="btn danger">Delete</button>
                        {% endif %}
                    </form>
                </div>
            {% endif %}

        </div>
    </main>
{% endblock content %}
